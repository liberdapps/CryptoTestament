(function(e){function t(t){for(var a,i,c=t[0],o=t[1],l=t[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,c=1;c<n.length;c++){var o=n[c];0!==r[o]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("1da1"),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("7a23")),s=Object(r["f"])('<nav class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm" id="mainNav"><div class="container px-5"><a class="navbar-brand fw-bold" href="/">CryptoTestament</a></div></nav><header class="masthead" style="padding-top:2rem;"></header><aside class="text-center bg-gradient-primary-to-secondary"><div class="container px-5"><div class="row gx-5 justify-content-center"><div class="col-sm-12"><div class="h2 fs-3 text-white mb-0"><p>With crypto, control your money.</p><p class="mb-0">With CryptoTestament, you decide who gets it after you&#39;re gone.</p></div></div></div></div></aside>',3),i={class:"main",style:{"padding-top":"1.5rem","padding-bottom":"1rem"}},c={key:0,class:"container-dapp container-sm"},o={class:"alert alert-danger mb-1",role:"alert",style:{"word-break":"break-word"}},l={key:1,class:"container-dapp container-sm text-muted"},u={key:0,class:"alert alert-info mb-5 text-center",role:"alert"},d=Object(r["g"])("You don't have a testament yet. Please use the form below to create one."),m=Object(r["e"])("br",null,null,-1),p=[d,m],f={key:1},b={class:"card shadow rounded mb-4"},y={class:"card-body"},h=Object(r["e"])("h5",{class:"card-title text-primary text-center mb-3"},"Testament status",-1),g={class:"text-center"},O={key:0},v={key:1,class:"alert alert-danger text-center mt-3"},j=Object(r["e"])("strong",null,"Your testament will soon be unlocked for execution!",-1),w=Object(r["e"])("br",null,null,-1),x=Object(r["g"])(" You must make a deposit, a withdraw or edit the testament details to keep it locked. "),T=[j,w,x],k={key:1},C=Object(r["e"])("strong",{class:"text-warning"},"UNLOCKED FOR EXECUTION",-1),A=Object(r["e"])("div",{class:"alert alert-warning text-center mt-3"}," Your testament will be executed soon. ",-1),E=[C,A],S={key:2},B=Object(r["e"])("strong",{class:"text-danger"},"CANCELLED",-1),N=Object(r["e"])("div",{class:"alert alert-info text-center mt-3"}," You can still withdraw your funds or reactivate the testament. ",-1),M=[B,N],I={key:3},L=Object(r["e"])("strong",{class:"text-success"},"EXECUTED",-1),P=Object(r["e"])("div",{class:"alert alert-success text-center mt-3"}," Funds were transferred to the beneficiary. ",-1),R=[L,P],F={class:"text-center mt-3 mb-1"},V=["disabled"],U=["disabled"],K={key:0,class:"card shadow rounded mb-4"},D={class:"card-body"},J=Object(r["e"])("h5",{class:"card-title text-primary text-center mb-3"},"Testament funds",-1),Y={key:0,class:"text-center mb-3"},W=Object(r["e"])("strong",null,"Deposit address: ",-1),Z=Object(r["e"])("br",null,null,-1),z={key:1,class:"alert alert-warning text-center"},Q={class:"text-center mb-3"},H=Object(r["e"])("strong",null,"Funds available for withdraw: ",-1),X=Object(r["e"])("br",null,null,-1),G={class:"text-center mb-1"},_={class:"d-flex align-items justify-content-center"},q=["disabled"],$=["disabled"],ee=["disabled"],te={key:1,class:"card shadow rounded mb-4"},ne={class:"card-body"},ae=Object(r["e"])("h5",{class:"card-title text-primary text-center mb-3"},"Testament funds",-1),re={class:"alert alert-warning text-center mb-2"},se={class:"card shadow rounded mb-2"},ie={class:"card-body"},ce=Object(r["e"])("h5",{class:"card-title text-primary text-center mb-3"},"Testament details",-1),oe={key:0,class:"alert alert-warning text-center mb-3"},le={class:"mb-3"},ue=Object(r["e"])("label",{for:"txtName",autofocus:"",class:"form-label fw-bold"},"Your name:",-1),de=["disabled"],me=Object(r["e"])("div",{class:"form-text text-italic"},"When your testament is about to be executed, we'll warn you using this name.",-1),pe={class:"mb-3"},fe=Object(r["e"])("label",{for:"txtContact",class:"form-label fw-bold"},"Your email:",-1),be=["disabled"],ye=Object(r["e"])("div",{class:"form-text"},"When your testament is about to be executed, we'll warn you using this email.",-1),he={class:"mb-3"},ge=Object(r["e"])("label",{for:"txtName",autofocus:"",class:"form-label fw-bold"},"Beneficiary name:",-1),Oe=["disabled"],ve=Object(r["e"])("div",{class:"form-text"},"When the funds in the testament are transferred, we'll notify the beneficiary using this name.",-1),je={class:"mb-3"},we=Object(r["e"])("label",{for:"txtContact",class:"form-label fw-bold"},"Beneficiary email:",-1),xe=["disabled"],Te=Object(r["e"])("div",{class:"form-text"},"When the funds in the testament are transferred, we'll notify the beneficiary using this email.",-1),ke={class:"mb-3"},Ce=Object(r["e"])("label",{for:"txtContact",class:"form-label fw-bold"},"Beneficiary wallet address:",-1),Ae=["disabled"],Ee=Object(r["e"])("div",{class:"form-text"},"The wallet address of the beneficiary that should receive the funds locked in the testament.",-1),Se={class:"mb-3"},Be={for:"txtContact",class:"form-label mb-0 fw-bold"},Ne=["disabled"],Me=Object(r["e"])("div",{class:"form-text mt-0"},"For how many days should the testament stay locked after you send a proof of life (make a deposit, a withdraw or change the testament details)? Example: if you choose 30 days, your testament will be unlocked if more than 30 days pass since your last transaction.",-1),Ie={class:"text-center mb-1"},Le=["disabled"],Pe=["disabled"],Re=["disabled"],Fe=Object(r["e"])("footer",{class:"bg-black text-center py-5"},[Object(r["e"])("div",{class:"container px-5"},[Object(r["e"])("div",{class:"text-white-50 small"},[Object(r["e"])("div",{class:"mb-0"},"CryptoTestament 2022")])])],-1);function Ve(e,t,n,a,d,m){return Object(r["i"])(),Object(r["d"])(r["a"],null,[s,Object(r["e"])("div",i,[null!==e.loadingError?(Object(r["i"])(),Object(r["d"])("div",c,[Object(r["e"])("div",o," Failure loading dApp: "+Object(r["j"])(e.loadingError)+". ",1)])):Object(r["c"])("",!0),null===e.loadingError?(Object(r["i"])(),Object(r["d"])("div",l,[null===e.testament?(Object(r["i"])(),Object(r["d"])("div",u,p)):Object(r["c"])("",!0),null!==e.testament?(Object(r["i"])(),Object(r["d"])("div",f,[Object(r["e"])("div",b,[Object(r["e"])("div",y,[h,Object(r["e"])("div",g,[m.testamentLocked?(Object(r["i"])(),Object(r["d"])("div",O,[m.testamentLocked?(Object(r["i"])(),Object(r["d"])("strong",{key:0,class:Object(r["h"])({"text-danger":m.testamentNotifiable})},"Locked until "+Object(r["j"])(m.formattedUnlockTime),3)):Object(r["c"])("",!0),m.testamentNotifiable?(Object(r["i"])(),Object(r["d"])("div",v,T)):Object(r["c"])("",!0)])):Object(r["c"])("",!0),m.testamentUnlocked?(Object(r["i"])(),Object(r["d"])("div",k,E)):Object(r["c"])("",!0),m.testamentCancelled?(Object(r["i"])(),Object(r["d"])("div",S,M)):Object(r["c"])("",!0),m.testamentExecuted?(Object(r["i"])(),Object(r["d"])("div",I,R)):Object(r["c"])("",!0)]),Object(r["e"])("div",F,[m.testamentLocked?(Object(r["i"])(),Object(r["d"])("button",{key:0,type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(){return m.cancelTestament&&m.cancelTestament.apply(m,arguments)}),disabled:e.processing},Object(r["j"])(e.processing?"Please, wait...":"Cancel testament"),9,V)):Object(r["c"])("",!0),m.testamentCancelled?(Object(r["i"])(),Object(r["d"])("button",{key:1,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=function(){return m.reactivateTestament&&m.reactivateTestament.apply(m,arguments)}),disabled:e.processing},Object(r["j"])(e.processing?"Please, wait...":"Reactivate testament"),9,U)):Object(r["c"])("",!0)])])]),m.testamentLocked||m.testamentCancelled?(Object(r["i"])(),Object(r["d"])("div",K,[Object(r["e"])("div",D,[J,m.testamentLocked?(Object(r["i"])(),Object(r["d"])("div",Y,[W,Z,Object(r["e"])("em",null,Object(r["j"])(m.formattedTestamentAddress),1)])):(Object(r["i"])(),Object(r["d"])("div",z," You can't deposit funds because this testament has been "+Object(r["j"])(m.testamentStatusString)+". ",1)),Object(r["e"])("div",Q,[H,X,Object(r["e"])("em",null,Object(r["j"])(m.formattedBalance),1)]),Object(r["e"])("div",G,[Object(r["e"])("div",_,[Object(r["l"])(Object(r["e"])("input",{class:"form-control text-center",style:{width:"50%",display:"inline-block"},"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.inputFundsAmount=t}),disabled:e.processing},null,8,q),[[r["k"],e.inputFundsAmount]]),Object(r["e"])("input",{type:"button",value:"MAX",class:"btn btn-light mx-2",onClick:t[3]||(t[3]=function(){return m.setMaxFundsAmount&&m.setMaxFundsAmount.apply(m,arguments)}),disabled:e.processing},null,8,$)]),Object(r["e"])("button",{type:"button",class:"btn btn-success mt-3",onClick:t[4]||(t[4]=function(){return m.withdrawFunds&&m.withdrawFunds.apply(m,arguments)}),disabled:!m.validFundsAmount||e.processing},Object(r["j"])(e.processing?"Please, wait...":"Withdraw funds"),9,ee)])])])):(Object(r["i"])(),Object(r["d"])("div",te,[Object(r["e"])("div",ne,[ae,Object(r["e"])("div",re," You can't deposit or withdraw funds because this testament has been "+Object(r["j"])(m.testamentStatusString)+". ",1)])]))])):Object(r["c"])("",!0),Object(r["e"])("div",se,[Object(r["e"])("div",ie,[ce,null===e.testament||m.testamentLocked?Object(r["c"])("",!0):(Object(r["i"])(),Object(r["d"])("div",oe," You can't edit the details because this testament has been "+Object(r["j"])(m.testamentStatusString)+". ",1)),Object(r["e"])("div",le,[ue,Object(r["l"])(Object(r["e"])("input",{type:"text",class:Object(r["h"])(["form-control",{"bg-danger bg-opacity-50":e.formInputChanged["testatorName"]&&!m.nameValid}]),ref:"txtName",disabled:!e.editMode&&null!==e.testament||e.processing,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.inputName=t}),onInput:t[6]||(t[6]=function(e){return m.formChanged("testatorName")})},null,42,de),[[r["k"],e.inputName]]),me]),Object(r["e"])("div",pe,[fe,Object(r["l"])(Object(r["e"])("input",{type:"text",class:Object(r["h"])(["form-control",{"bg-danger bg-opacity-50":e.formInputChanged["testatorEmail"]&&!m.emailValid}]),disabled:!e.editMode&&null!==e.testament||e.processing,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.inputEmail=t}),onInput:t[8]||(t[8]=function(e){return m.formChanged("testatorEmail")})},null,42,be),[[r["k"],e.inputEmail]]),ye]),Object(r["e"])("div",he,[ge,Object(r["l"])(Object(r["e"])("input",{type:"text",class:Object(r["h"])(["form-control",{"bg-danger bg-opacity-50":e.formInputChanged["beneficiaryName"]&&!m.beneficiaryNameValid}]),disabled:!e.editMode&&null!==e.testament||e.processing,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.inputBeneficiaryName=t}),onInput:t[10]||(t[10]=function(e){return m.formChanged("beneficiaryName")})},null,42,Oe),[[r["k"],e.inputBeneficiaryName]]),ve]),Object(r["e"])("div",je,[we,Object(r["l"])(Object(r["e"])("input",{type:"text",class:Object(r["h"])(["form-control",{"bg-danger bg-opacity-50":e.formInputChanged["beneficiaryEmail"]&&!m.beneficiaryEmailValid}]),disabled:!e.editMode&&null!==e.testament||e.processing,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.inputBeneficiaryEmail=t}),onInput:t[12]||(t[12]=function(e){return m.formChanged("beneficiaryEmail")})},null,42,xe),[[r["k"],e.inputBeneficiaryEmail]]),Te]),Object(r["e"])("div",ke,[Ce,Object(r["l"])(Object(r["e"])("input",{type:"text",class:Object(r["h"])(["form-control",{"bg-danger bg-opacity-50":e.formInputChanged["beneficiaryAddress"]&&!m.beneficiaryAddressValid}]),disabled:!e.editMode&&null!==e.testament||e.processing,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.inputBeneficiaryAddress=t}),onInput:t[14]||(t[14]=function(e){return m.formChanged("beneficiaryAddress")})},null,42,Ae),[[r["k"],e.inputBeneficiaryAddress]]),Ee]),Object(r["e"])("div",Se,[Object(r["e"])("label",Be,"Proof of life threshold: "+Object(r["j"])(e.inputProofOfLife+" days"),1),Object(r["l"])(Object(r["e"])("input",{type:"range",class:"form-range",min:"30",max:"365",disabled:!e.editMode&&null!==e.testament||e.processing,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.inputProofOfLife=t}),onInput:t[16]||(t[16]=function(){return e.formInput&&e.formInput.apply(e,arguments)})},null,40,Ne),[[r["k"],e.inputProofOfLife]]),Me]),Object(r["e"])("div",Ie,[!e.editMode&&null!==e.testament&&m.testamentLocked?(Object(r["i"])(),Object(r["d"])("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[17]||(t[17]=function(){return m.editTestament&&m.editTestament.apply(m,arguments)}),disabled:e.processing},Object(r["j"])(e.processing?"Please, wait...":"Edit details"),9,Le)):Object(r["c"])("",!0),e.editMode&&null!==e.testament&&m.testamentLocked?(Object(r["i"])(),Object(r["d"])("button",{key:1,type:"button",class:"btn btn-danger",onClick:t[18]||(t[18]=function(){return m.cancelTestamentChanges&&m.cancelTestamentChanges.apply(m,arguments)}),disabled:e.processing},"Cancel",8,Pe)):Object(r["c"])("",!0),e.editMode||null===e.testament?(Object(r["i"])(),Object(r["d"])("button",{key:2,type:"button",class:"btn btn-success",onClick:t[19]||(t[19]=function(){return m.setupTestament&&m.setupTestament.apply(m,arguments)}),disabled:e.processing||!m.formValid},Object(r["j"])(e.processing?"Please, wait...":"Save"),9,Re)):Object(r["c"])("",!0)])])])])):Object(r["c"])("",!0)]),Fe],64)}n("a9e3"),n("498a"),n("d3b7"),n("25f0"),n("ac1f"),n("5319");var Ue={instance:{loadingError:null,walletAddress:null,editMode:!1,processing:!1,testament:null,status:null,formInputChanged:{testatorName:!1,testatorEmail:!1},inputFundsAmount:"",inputName:"",inputEmail:"",inputBeneficiaryName:"",inputBeneficiaryEmail:"",inputBeneficiaryAddress:"",inputProofOfLife:30}},Ke=n("5530"),De=(n("d81d"),n("b64b"),n("100f")),Je=n.n(De),Ye=n("2eaf"),We=n("31af"),Ze=n.n(We),ze=n("9721"),Qe=n("8f0a"),He=n("07b1"),Xe=n("eb2c"),Ge=n("99e5"),_e=n.n(Ge),qe=(n("00b4"),n("d9e2"),n("4d63"),n("c607"),n("2c3e"),n("1276"),n("466d"),n("99af"),n("b0c0"),n("e9c4"),n("5ba3")),$e=n.n(qe),et=n("3452"),tt=n.n(et),nt=n("9816"),at=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"cancelTestament",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"testatorAddress",type:"address"}],name:"executeTestamentOf",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"reactivateTestament",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"serviceFeeRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"serviceOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_serviceFeeRate",type:"uint256"}],name:"setServiceFeeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"beneficiaryAddress",type:"address"},{internalType:"uint256",name:"proofOfLifeThreshold",type:"uint256"},{internalType:"string",name:"encryptedKey",type:"string"},{internalType:"string",name:"encryptedInfo",type:"string"}],name:"setupTestament",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"testatorAddress",type:"address"}],name:"testamentDetailsOf",outputs:[{components:[{internalType:"uint256",name:"creationTimestamp",type:"uint256"},{internalType:"address",name:"testamentAddress",type:"address"},{internalType:"address",name:"testatorAddress",type:"address"},{internalType:"address",name:"beneficiaryAddress",type:"address"},{internalType:"uint256",name:"testamentBalance",type:"uint256"},{internalType:"uint256",name:"proofOfLifeThreshold",type:"uint256"},{internalType:"uint256",name:"lastProofOfLifeTimestamp",type:"uint256"},{internalType:"string",name:"encryptedKey",type:"string"},{internalType:"string",name:"encryptedInfo",type:"string"},{internalType:"uint256",name:"executionTimestamp",type:"uint256"},{internalType:"uint256",name:"executionBalance",type:"uint256"},{internalType:"enum TestamentStatus",name:"status",type:"uint8"},{internalType:"bool",name:"exists",type:"bool"}],internalType:"struct CryptoTestamentService.Testament",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"testaments",outputs:[{components:[{internalType:"uint256",name:"creationTimestamp",type:"uint256"},{internalType:"address",name:"testamentAddress",type:"address"},{internalType:"address",name:"testatorAddress",type:"address"},{internalType:"address",name:"beneficiaryAddress",type:"address"},{internalType:"uint256",name:"testamentBalance",type:"uint256"},{internalType:"uint256",name:"proofOfLifeThreshold",type:"uint256"},{internalType:"uint256",name:"lastProofOfLifeTimestamp",type:"uint256"},{internalType:"string",name:"encryptedKey",type:"string"},{internalType:"string",name:"encryptedInfo",type:"string"},{internalType:"uint256",name:"executionTimestamp",type:"uint256"},{internalType:"uint256",name:"executionBalance",type:"uint256"},{internalType:"enum TestamentStatus",name:"status",type:"uint8"},{internalType:"bool",name:"exists",type:"bool"}],internalType:"struct CryptoTestamentService.Testament[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawServiceFees",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawTestamentFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],rt="0x402FE43aE5d4F8Cc93Df705cf745c63E6E4a190d",st=604800,it="-----BEGIN PUBLIC KEY-----\nMIIBITANBgkqhkiG9w0BAQEFAAOCAQ4AMIIBCQKCAQB+b7qrWcuBkpmiCcUBO0RQ\nZjAi6kAivuXUZB5dcJ/HO8zbf9XkseRn3fJEmxXJz/G8qVis14VqPQkv07mEHisr\npweKHRl+YwIsKfOw7kQwzMfiF5X9hNZt9bHaszOPsOxBgKK3bE1W2K04V3MYmFxk\nft4wG2KgVL8czFlfk8COOwnl6tLg/0GqVBy4KWZCz6ZkJbONalAH2zZ6gkCIySio\nxS7mZJMdHOZoZkSBEBOZXHY7SCfGze/+0ggzD9BgBHssivx9lET94XLfT7F0hvJQ\nhj/GVuIojQ9oVW36c5JdJ5aoRdvkhiRVPf0LUh0SAMQapUdgGZ26MBxoBWR0x831\nAgMBAAE=\n-----END PUBLIC KEY-----";function ct(e){return"string"===typeof e||e instanceof String}function ot(e){return void 0===e||null===e||0===e.trim().length}function lt(e){return/\S+@\S+\.\S+/.test(e)}function ut(e){return $e.a.isAddress(e)}function dt(e,t){if(!ct(e))throw new Error("Pass strings to prevent floating point precision issues.");var n="^(0|[1-9]\\d*)(\\.\\d{0,"+t+"})?$";if(!1===new RegExp(n).test(e))throw new Error("INVALID_NUMBER");var a=$e.a.BN,r=new a(10),s=r.pow(new a(t)),i="-"===e.substring(0,1);if(i&&(e=e.substring(1)),"."===e)throw new Error("Invalid value ".concat(e," cannot be converted to")+" base unit with ".concat(t," decimals."));var c=e.split(".");if(c.length>2)throw new Error("Too many decimal points");var o=c[0],l=c[1];if(o||(o="0"),l||(l="0"),l.length>t)throw new Error("Too many decimal places");while(l.length<t)l+="0";o=new a(o),l=new a(l);var u=o.mul(s).add(l);return i&&(u=u.neg()),new a(u.toString(10),10)}function mt(e){return new $e.a.BN(e)}function pt(e,t){var n=new $e.a.BN(10).pow(new $e.a.BN(t)),a=e.mod(n).toString(10);while(a.length<t)a="0".concat(a);a=a.match(/^([0-9]*[1-9]|0)(0*)/)[1];var r=e.div(n).toString(10);e="".concat(r,".").concat(a);var s=t-a.length;while(s>0)s--,e="".concat(e,"0");return e}function ft(e){var t=new nt["a"];return t.setPublicKey(it),t.encrypt(e)}function bt(e,t,n){var a=JSON.parse(tt.a.AES.decrypt(t.encryptedInfo,n).toString(tt.a.enc.Utf8));e.inputName=a.name,e.inputEmail=a.email,e.inputBeneficiaryName=a.beneficiaryName,e.inputBeneficiaryEmail=a.beneficiaryEmail,e.inputBeneficiaryAddress=t.beneficiaryAddress,e.inputProofOfLife=Number(t.proofOfLifeThreshold)/86400,e.status=t.status,e.testament=t}function yt(e,t,n,a,r){var s={name:e,email:t,beneficiaryName:n,beneficiaryEmail:a};return tt.a.AES.encrypt(JSON.stringify(s),r).toString()}function ht(e,t,n,r,s){var i=null,c=!1,o=!1;function l(){null!==i&&(clearInterval(i),i=null)}function u(e){c||(c=!0,l(),s(e))}function d(e){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.eth.getTransactionReceipt(n);case 2:if(a=t.sent,!a){t.next=13;break}if(!a.status){t.next=12;break}if(l(),!o){t.next=8;break}return t.abrupt("return");case 8:o=!0,r(),t.next=13;break;case 12:u("Transaction failed. Please try again later.");case 13:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}t.send({from:n,value:0}).on("transactionHash",(function(e){i=setInterval((function(){d(e)}),5e3)})).on("error",u)}var gt={31:"https://public-node.testnet.rsk.co"},Ot=Object.keys(gt).map(Number),vt=new Je.a({providerOptions:{walletconnect:{package:Ye["a"],options:{rpc:gt}},portis:{package:Ze.a,options:{id:"a1c8672b-7b1c-476b-b3d0-41c27d575920",network:{nodeUrl:"https://public-node.testnet.rsk.co",chainId:31}}},torus:{package:ze["a"]},"custom-ledger":He["ledgerProviderOptions"],"custom-dcent":Xe["dcentProviderOptions"],"custom-trezor":Object(Ke["a"])(Object(Ke["a"])({},Qe["trezorProviderOptions"]),{},{options:{manifestEmail:"info@iovlabs.org",manifestAppUrl:"https://basic-sample.rlogin.identity.rifos.org/"}})},rpcUrls:gt,supportedChains:Ot}),jt={address:null,web3Instance:null,testamentContract:null,encryptionKey:null,connect:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,vt.connect();case 3:return n=t.sent,a=new _e.a(n.provider),t.next=7,a.eth.getAccounts();case 7:return r=t.sent[0],e.web3Instance=a,e.testamentServiceContract=new a.eth.Contract(at,rt),t.next=12,a.eth.personal.sign("Log-in to CryptoTestament",r);case 12:return e.encryptionKey=t.sent,t.next=15,e.testamentServiceContract.methods.testamentDetailsOf(r).call();case 15:s=t.sent,Ue.instance.walletAddress=r,s.exists?bt(Ue.instance,s,e.encryptionKey):Ue.instance.testament=null,t.next=26;break;case 20:t.prev=20,t.t0=t["catch"](0),console.log(t.t0),i=t.t0,t.t0.message&&(i=t.t0.message),Ue.instance.loadingError=i;case 26:case"end":return t.stop()}}),t,null,[[0,20]])})))()}},wt=window.jQuery,xt={name:"App",data:function(){return Ue.instance},computed:{nameValid:function(){return!ot(this.inputName)},emailValid:function(){return!ot(this.inputEmail)&&lt(this.inputEmail)},beneficiaryNameValid:function(){return!ot(this.inputBeneficiaryName)},beneficiaryEmailValid:function(){return!ot(this.inputBeneficiaryEmail)&&lt(this.inputBeneficiaryEmail)},beneficiaryAddressValid:function(){return!ot(this.inputBeneficiaryAddress)&&ut(this.inputBeneficiaryAddress.toLowerCase())},formValid:function(){return this.nameValid&&this.emailValid&&this.beneficiaryNameValid&&this.beneficiaryEmailValid&&this.beneficiaryAddressValid&&Number(this.inputProofOfLife)>=1},validFundsAmount:function(){try{var e=dt(this.inputFundsAmount.trim(),18),t=mt(this.testament.testamentBalance);return"0"!==e.toString()&&e.lte(t)}catch(n){return!1}},formattedTestamentAddress:function(){return this.testament?this.testament.testamentAddress.toLowerCase():null},formattedUnlockTime:function(){if(this.testament){var e=Number(this.testament.lastProofOfLifeTimestamp)+Number(this.testament.proofOfLifeThreshold),t=new Date(1e3*e);return t.toISOString().replace("T"," ").replace(".000Z","")+" UTC"}return""},formattedBalance:function(){var e="0";return this.testament&&(e=String(this.testament.testamentBalance)),pt(mt(e),18)+" rBTC"},testamentStatusString:function(){return this.testamentLocked?"locked":this.testamentUnlocked?"unlocked for execution":this.testamentCancelled?"cancelled":this.testamentExecuted?"executed":""},testamentLocked:function(){if(this.testament){var e=Math.floor((new Date).getTime()/1e3),t=e-this.testament.lastProofOfLifeTimestamp;return"0"===this.testament.status&&t<=this.testament.proofOfLifeThreshold}return!1},testamentNotifiable:function(){if(this.testament){var e=Math.floor((new Date).getTime()/1e3),t=e-this.testament.lastProofOfLifeTimestamp;return"0"===this.testament.status&&t+st>=this.testament.proofOfLifeThreshold}return!1},testamentUnlocked:function(){if(this.testament){var e=Math.floor((new Date).getTime()/1e3),t=e-this.testament.lastProofOfLifeTimestamp;return"0"===this.testament.status&&t>this.testament.proofOfLifeThreshold}return!1},testamentCancelled:function(){return this.testament&&"1"===this.testament.status},testamentExecuted:function(){return this.testament&&"2"===this.testament.status}},methods:{formChanged:function(e){this.formInputChanged[e]=!0},setMaxFundsAmount:function(){this.inputFundsAmount=pt(mt(this.testament.testamentBalance),18)},setupTestament:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s,i,c,o,l,u,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:d=function(e){if(l.processing=!1,console.log(e),4001!==e.code&&-1===String(e).indexOf("Invalid JSON RPC response")){var t=e;e.message&&e.message.trim().length>0&&(t=e.message),wt("#errorMsg").text(t),wt("#errorModal").modal("show")}},n=e.inputName.trim(),r=e.inputEmail.trim(),s=e.inputBeneficiaryName.trim(),i=e.inputBeneficiaryEmail.trim(),c=e.inputBeneficiaryAddress.trim().toLowerCase(),o=24*Number(e.inputProofOfLife)*3600,l=e,u=yt(n,r,s,i,jt.encryptionKey),e.processing=!0,m=ft(jt.encryptionKey),ht(jt.web3Instance,jt.testamentServiceContract.methods.setupTestament(c,o,m,u),e.walletAddress,Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jt.testamentServiceContract.methods.testamentDetailsOf(l.walletAddress).call();case 3:t=e.sent,bt(l,t,jt.encryptionKey),l.processing=!1,l.editMode=!1,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),d(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),(function(e){d(e)}));case 12:case"end":return t.stop()}}),t)})))()},editTestament:function(){var e=this;this.editMode=!0,this.$nextTick((function(){return e.$refs.txtName.focus()}))},cancelTestamentChanges:function(){this.editMode=!1,bt(this,this.testament,jt.encryptionKey)},cancelTestament:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=function(e){if(n.processing=!1,console.log(e),4001!==e.code&&-1===String(e).indexOf("Invalid JSON RPC response")){var t=e;e.message&&e.message.trim().length>0&&(t=e.message),wt("#errorMsg").text(t),wt("#errorModal").modal("show")}},n=e,e.processing=!0,ht(jt.web3Instance,jt.testamentServiceContract.methods.cancelTestament(),e.walletAddress,Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jt.testamentServiceContract.methods.testamentDetailsOf(n.walletAddress).call();case 3:t=e.sent,bt(n,t,jt.encryptionKey),n.cancelTestamentChanges(),n.processing=!1,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),r(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),(function(e){r(e)}));case 4:case"end":return t.stop()}}),t)})))()},reactivateTestament:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=function(e){if(n.processing=!1,console.log(e),4001!==e.code&&-1===String(e).indexOf("Invalid JSON RPC response")){var t=e;e.message&&e.message.trim().length>0&&(t=e.message),wt("#errorMsg").text(t),wt("#errorModal").modal("show")}},n=e,e.processing=!0,ht(jt.web3Instance,jt.testamentServiceContract.methods.reactivateTestament(),e.walletAddress,Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jt.testamentServiceContract.methods.testamentDetailsOf(n.walletAddress).call();case 3:t=e.sent,bt(n,t,jt.encryptionKey),n.cancelTestamentChanges(),n.processing=!1,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),r(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),(function(e){r(e)}));case 4:case"end":return t.stop()}}),t)})))()},withdrawFunds:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=function(e){if(n.processing=!1,console.log(e),4001!==e.code&&-1===String(e).indexOf("Invalid JSON RPC response")){var t=e;e.message&&e.message.trim().length>0&&(t=e.message),wt("#errorMsg").text(t),wt("#errorModal").modal("show")}},n=e,e.processing=!0,ht(jt.web3Instance,jt.testamentServiceContract.methods.withdrawTestamentFunds(dt(e.inputFundsAmount.trim(),18).toString()),e.walletAddress,Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jt.testamentServiceContract.methods.testamentDetailsOf(n.walletAddress).call();case 3:t=e.sent,bt(n,t,jt.encryptionKey),n.cancelTestamentChanges(),n.inputFundsAmount="",n.processing=!1,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),r(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),(function(e){r(e)}));case 4:case"end":return t.stop()}}),t)})))()}}},Tt=n("6b0d"),kt=n.n(Tt);const Ct=kt()(xt,[["render",Ve]]);var At=Ct;function Et(){return St.apply(this,arguments)}function St(){return St=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jt.connect();case 2:t=0,0==t&&Object(r["b"])(At).mount("#app");case 4:case"end":return e.stop()}}),e)}))),St.apply(this,arguments)}Et()},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){}});
//# sourceMappingURL=app.d01c9da9.js.map